spring.application.name=RA56

spring.datasource.driver-class-name=org.postgresql.Driver
spring.sql.init.platform=postgres
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/isa}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:root}

spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Za bolju preglednost tokom testiranja
#logging.level.org.hibernate.SQL=DEBUG
#logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

spring.sql.init.mode=always

spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${SPRING_MAIL_USERNAME:webprojekat53@gmail.com}
spring.mail.password=${SPRING_MAIL_PASSWORD:zjczefjbjatjcetx}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

app.activation.base-url=${APP_ACTIVATION_BASE_URL:http://localhost:8080/auth/activate?token=}
app.base-url=${APP_BASE_URL:http://localhost:8080}
app.ffmpeg.binary=${APP_FFMPEG_BINARY:C:/ffmpeg-2026-02-09-git-9bfa1635ae-essentials_build/bin/ffmpeg.exe}

jwt.app-name=ra56-api
jwt.secret=${JWT_SECRET:ra56-secret-key-for-jwt-token-has-to-be-64-bytes-long-1234567890}
jwt.expires-in=86400000
jwt.auth-header=Authorization

# Multipart file upload settings
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=200MB
spring.servlet.multipart.max-request-size=210MB

spring.cache.jcache.config=classpath:ehcache.xml

spring.rabbitmq.host=${SPRING_RABBITMQ_HOST:localhost}
spring.rabbitmq.port=${SPRING_RABBITMQ_PORT:5672}
spring.rabbitmq.username=${SPRING_RABBITMQ_USERNAME:guest}
spring.rabbitmq.password=${SPRING_RABBITMQ_PASSWORD:guest}

app.transcoding.exchange=transcoding.exchange
app.transcoding.queue=transcoding.queue
app.transcoding.routing-key=transcoding.job
app.transcoding.dlq=transcoding.dlq
app.transcoding.max-retries=3

# Actuator + Prometheus metrics
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=always
management.endpoint.health.probes.enabled=true
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true
management.endpoint.health.group.liveness.include=livenessState
management.endpoint.health.group.readiness.include=readinessState,db,rabbit

# Active users metric tuning
app.metrics.active-users.timeout-ms=86400000
app.metrics.active-users.live-timeout-ms=300000
app.metrics.active-users.cleanup-interval-ms=60000

# Thumbnail compression (daily)
app.thumbnail-compression.cron=0 15 3 * * ?
app.thumbnail-compression.older-than-days=30
app.thumbnail-compression.batch-size=100
app.thumbnail-compression.quality=0.75

# Popularity ETL (daily at 00:00)
app.popularity-etl.cron=0 0 0 * * ?