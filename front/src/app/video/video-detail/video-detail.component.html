<div class="page-container" *ngIf="video; else loadingOrError">
  <div class="main-content">
    <div class="video-player-container">
      <video controls autoplay class="video-player">
        <source [src]="video.videoUrl" type="video/mp4">
        Your browser does not support the video tag.
      </video>
    </div>
    <div class="video-details">
      <div class="title-row">
        <h1 class="title">{{ video.title }}</h1>
        <div class="action-row">
          <button type="button" class="action-button like-button" (click)="handleGuestAction()">üëç Like</button>
        </div>
      </div>
      <p class="author">
        Uploaded by:
        <a [routerLink]="['/users', video.ownerUsername]">{{ video.ownerUsername }}</a>
        on {{ video.createdAt | date: 'medium' }}
      </p>
      <hr>
      <p class="description">{{ video.description }}</p>
      <div class="tags" *ngIf="video.tags">
        <strong>Tags:</strong> {{ video.tags }}
      </div>
      <section class="interaction-card">
        <p class="hint" *ngIf="!authService.isAuthenticated()">
          Prijavite se da biste mogli da lajkujete ili komentarisete.
        </p>
        <div class="comment-box">
          <textarea rows="4" placeholder="Write a comment..." [disabled]="!authService.isAuthenticated()"></textarea>
          <button type="button" (click)="handleGuestAction()">Post comment</button>
        </div>
        <p *ngIf="guestNotice" class="error-message">{{ guestNotice }}</p>
      </section>
    </div>
  </div>
  <div class="sidebar">
    <section class="chat-card">
    </section>
  </div>
</div>

<ng-template #loadingOrError>
  <div class="page-container">
    <p *ngIf="!errorMessage">Loading video...</p>
    <p *ngIf="errorMessage" class="error-message">{{ errorMessage }}</p>
  </div>
</ng-template>
